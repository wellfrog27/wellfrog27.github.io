<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">

<head>
    <meta name="generator" content="Hugo 0.56.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/css/theme_scrapbook.css" />
    <link rel="start" href="https://wellfrog27.github.io" title="Home" />
    <link rel='icon' type='image/x-icon' href="https://wellfrog27.github.io/images/favicon.ico" />
    

    <title>变量的声明 - 阮一峰的网络日志</title>
    <link rel="stylesheet" href="/css/custom.css" />
    
    <script src="/js/click_enlarge_image.js"></script>
    





<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123-45', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</head>


<body id="scrapbook" class="mt-entry-archive one-column">

    <div id="container">
        <div id="container-inner">
<div id="header">
    <div id="header-inner">
        <div id="header-content">
            
            <div id="header-name">
                阮一峰的网络日志
                
                <span>» <a href="/blog/" title="首页">首页</a></span>
                
                <span>» <a href="/blog/archives/" title="档案">档案</a></span>
                
            </div>
            
            <div id="google_search" style="background-image:url('/images/searchtop.gif');">
                
                <form action="https://www.baidu.com/s" target="_blank" method="get" id="cse-search-box">
                    <div>
                        <input type="text" size="20" name="origin" class="searchbox" id="sbi" value="">
                        <input type="hidden" name="wd" value="">
                        
                        <input type="image" src="/images/top_search_submit.gif" class="searchbox_submit" value=""
                            alt="搜索" name="sa" onclick="this.form.wd.value = this.form.origin.value + ' 阮一峰'">
                    </div>
                </form>

                
            </div>
            <div id="feed_icon">
                
            </div>

        </div>
    </div>

</div>



<div id="content">
    <div id="content-inner">
        <div id="alpha">
            <div id="alpha-inner">

                <div id="entry-1983" class="entry-asset asset hentry">

                    <div class="asset-header">
                        <div class="asset-nav entry-nav">

                            <div class="entry-location">
                                <ul>
                                    
                                    <li>上一篇：<a href="https://wellfrog27.github.io/blog/weekly/weekly-41/"
                                            title="科技爱好者周刊：第41期">科技爱好者周刊：第41期</a>
                                    </li>
                                    

                                    
                                    <li>下一篇：<a href="https://wellfrog27.github.io/blog/weekly/weekly-37/"
                                            title="科技爱好者周刊：第37期">科技爱好者周刊：第37期</a>
                                    </li>
                                    

                                </ul>
                            </div>



                            <div class="entry-categories">
                                <p>分类<span class="delimiter">：</span></p>
                                <ul>
                                    <li><a href="https://wellfrog27.github.io/blog/clang/"
                                            rel="tag">C语言</a></li>
                                </ul>
                            </div>




                            <div class="entry-location-mobile" style="float: right;">
                                <ul>
                                    
                                    <li><a href="https://wellfrog27.github.io/blog/weekly/weekly-41/" title="科技爱好者周刊：第41期">⇐</a></li>
                                    
                                    
                                    <li><a href="https://wellfrog27.github.io/blog/weekly/weekly-37/" title="科技爱好者周刊：第37期">⇒</a></li>
                                    
                                </ul>
                            </div>

                        </div>
                    </div>

                    <article class="hentry">
                        <h1 id="page-title" class="asset-name entry-title">变量的声明</h1>
                        
                        
                        
                        <div id="share_button" class="social-share"
                            style="float:right;padding-right:2em;padding-top:1em;">
                            <a class="bshareDiv" href="http://www.bshare.cn/share" style="display: block; text-decoration: none; padding: 0px;
                margin: 0px; font-size: 12px; height: 21px; width: 51px;">
                                <div class="bsPromo bsPromo1"></div>
                                <div class="buzzButton bsStyle10" style="height:21px;color:#333;;background:transparent
                  url(http://static.bshare.cn/frame/images/button_custom10-zh-Orange.gif)
                  no-repeat;text-align:center;width:51px;">
                                </div>
                                <div style="clear:both;"></div>
                            </a>

                            <script type="text/javascript" charset="utf-8"
                                src="http://static.bshare.cn/b/buttonLite.js#uuid=&amp;style=10&amp;bgcolor=#fff&amp;bp=weixin,qqim,qzone,qqmb,sinaminiblog,fanfou,xueqiu,douban,facebook,twitter,gplus,instapaper&amp;ssc=false">
                            </script>

                            <script type="text/javascript" charset="utf-8">
                                bShare.addEntry({
                                    title: document.getElementById("page-title").innerHTML,
                                    url: window.location.href
                                });
                            </script>

                        </div>
                        

                        <div class="asset-meta">
                            <p class="vcard author">作者： <a class="fn url" href="/">
                                    
                                    阮一峰
                                    
                                </a></p>
                            <p>日期： <a href="https://wellfrog27.github.io/blog/clang/"><abbr class="published"
                                        title=2019-07-03&#32;00:00:00&#32;&#43;0000&#32;UTC>2019年7月3日</abbr></a>
                            </p>
                        </div>

                        <div class="asset-content entry-content" id="main-content">
                            

<h2 id="声明的结构">声明的结构</h2>

<p>声明一个变量时，前面可以加上三类修饰词。</p>

<ul>
<li>类型符（Type specifier）：变量的类型</li>
<li>储存符（Storage class）：变量储存在哪里</li>
<li>修饰符（Type qualifier）：一些其他属性</li>
</ul>

<p>类型符有以下几种。</p>

<ul>
<li>void</li>
<li>char</li>
<li>short</li>
<li>int</li>
<li>long</li>
<li>long long</li>
<li>signed</li>
<li>unsigned</li>
<li>float</li>
<li>double</li>
<li>struct</li>
<li>enum</li>
<li>union</li>
</ul>

<p>储存符有以下几种。</p>

<ul>
<li>extern</li>
<li>static</li>
<li>register</li>
<li>auto</li>
<li>typedef</li>
</ul>

<p>类型符有以下几种。</p>

<ul>
<li>const</li>
<li>volatile</li>
<li>restrict</li>
</ul>

<h2 id="变量声明的解读规则">变量声明的解读规则</h2>

<ul>
<li>首先，找出变量名</li>
<li>然后，从后向前解读</li>
<li>圆括号具有最高优先级</li>
<li>变量后边如果有<code>[]</code>，表示数组；如果有<code>()</code>，表示函数。</li>
<li><code>*</code>表示<code>pointer to</code>，即“指向xxx的指针”。</li>
</ul>

<p><code>int (*x)[12];</code>是“x is a pointer to an array of 12 int”，而<code>int *x[12];</code>是“x is an array of 12 pointer to int”</p>

<h2 id="储存符">储存符</h2>

<p><code>extern</code>表示，变量储存在外部，没有必要为它分配空间。通常用来表示，声明在不同文件里面的全局变量。</p>

<p><code>static</code>对于全局变量和局部变量有不同含义。如果用于局部变量，表示在同一个函数的不同执行之间，保持它的值，不会随着每次执行而初始化。它的行为类似于全局变量，但只在函数内部可用。用于局部变量时，表示变量对于其他C文件并非全局可用，即该变量不会被链接（link）。总得来说，<code>static</code>声明的变量都是无法从它所在的源文件之外读取的。</p>

<p><code>register</code>表示变量应该储存在寄存器之中。编译器不一定会遵守这个建议。对于<code>register</code>声明的变量，不能取它的地址，即不能使用<code>&amp;</code>运算符。</p>

<p><code>auto</code>表示这个变量的储存由编译器自主分配。它没有实际作用。因为只要不是<code>extern</code>，都是由编译器自主分配的。</p>

<p><code>typedef</code>用来为某种类型声明一个别名。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">typedef</span> <span style="color:#00688b;font-weight:bold">int</span> *xpto;</code></pre></td></tr></table>
</div>
</div>
<p>上面代码中，<code>xpto</code>就代表<code>int *</code>。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">xpto x;</code></pre></td></tr></table>
</div>
</div>
<p>前面不能再加其他修饰符。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#00688b;font-weight:bold">unsigned</span> xpto x; <span style="color:#228b22">/* 无效 */</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="修饰符">修饰符</h2>

<h3 id="const">const</h3>

<p><code>const</code>命令表示变量不可修改。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#00688b;font-weight:bold">int</span> *<span style="color:#8b008b;font-weight:bold">const</span> x</code></pre></td></tr></table>
</div>
</div>
<p>如果它的前面有<code>*</code>，表示指针变量<code>x</code>不可修改。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#00688b;font-weight:bold">int</span> <span style="color:#8b008b;font-weight:bold">const</span> *x
<span style="color:#1e889b"># 或者
</span><span style="color:#1e889b"></span><span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#00688b;font-weight:bold">int</span> *x</code></pre></td></tr></table>
</div>
</div>
<p>如果<code>const</code>在<code>*</code>前面，则表示<code>*x</code>所代表的那个值不可修改。</p>

<p>这两者可以结合起来。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">const</span> <span style="color:#00688b;font-weight:bold">char</span> **<span style="color:#8b008b;font-weight:bold">const</span>*<span style="color:#8b008b;font-weight:bold">const</span> x;</code></pre></td></tr></table>
</div>
</div>
<h3 id="volatile">volatile</h3>

<p><code>volatile</code>表示它所声明的变量，可能不预期地发生变量，不受C的实现的控制，因此编译器不要对这类变量进行优化。硬件设备的编程中，这个命令很常用，表示。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">while</span> (x,x) { ... }</code></pre></td></tr></table>
</div>
</div>
<p>上面代码中，如果<code>x</code>是一个<code>volatile</code>变量，则编译器会真的对<code>x</code>计算两次值。否则，编译器会将上面的代码优化如下。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8b008b;font-weight:bold">while</span> (x) { ... }</code></pre></td></tr></table>
</div>
</div>
<h3 id="restrict">restrict</h3>

<p><code>restrict</code>命令表示它所声明的变量，是唯一接触到其所代表的内存区域的途径。这对编译器优化很有好处。</p>

<h2 id="参考链接">参考链接</h2>

<ul>
<li><a href="http://codinghighway.com/2013/12/29/the-absolute-definitive-guide-to-decipher-c-declarations/">The absolute, definitive guide to decipher C declarations</a>, by Filipe Gonçalves</li>
</ul>

                        </div>

                        <div class="asset-footer">
                            <h3>文档信息</h3>
                            <ul>
                                <li>版权声明：自由转载-非商用-非衍生-保持署名（<a
                                        href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
                                </li>
                                <li>发表日期： <abbr class="published"
                                        title=".Date">2019年7月3日</abbr></li>
                            </ul>
                        </div>

                    </article>

                </div>

                
                
                <div id="related_entries">

                    <h2>相关文章</h2>
                    <ul>
                        
                        <li><strong>2019.02.10: <a href="https://wellfrog27.github.io/blog/clang/operator/"
                                    title="运算符">运算符</a></strong>

                            <div class="entry-body">
                                暂无描述，请点击阅读全文
                            </div>

                        </li>
                        
                        <li><strong>2019.01.10: <a href="https://wellfrog27.github.io/blog/clang/statement/"
                                    title="语句">语句</a></strong>

                            <div class="entry-body">
                                暂无描述，请点击阅读全文
                            </div>

                        </li>
                        
                        <li><strong>2018.06.19: <a href="https://wellfrog27.github.io/blog/clang/string/"
                                    title="字符串">字符串</a></strong>

                            <div class="entry-body">
                                暂无描述，请点击阅读全文
                            </div>

                        </li>
                        
                        <li><strong>2017.09.06: <a href="https://wellfrog27.github.io/blog/clang/variable/"
                                    title="变量">变量</a></strong>

                            <div class="entry-body">
                                暂无描述，请点击阅读全文
                            </div>

                        </li>
                        
                    </ul>
                </div>
                

            </div>
        </div>
    </div>
</div>



<div id="click-img-container">
    <img src="" alt="Big Image">
</div>




<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "lin-hao-rong-de-wang-luo-ri-zhi" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



<div id="footer">
  <div id="footer-inner">
    <div id="footer-content">
      <p>2019 &copy; <a title="电子邮件" href="mailto:yifeng.ruan@gmail.com" target="_blank">联系方式</a>
        
    </div>
  </div>
</div>
</div>
    </div>

    
    
</body>

</html>