<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">

<head>
    <meta name="generator" content="Hugo 0.56.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/css/theme_scrapbook.css" />
    <link rel="start" href="https://wellfrog27.github.io" title="Home" />
    <link rel='icon' type='image/x-icon' href="https://wellfrog27.github.io/images/favicon.ico" />
    

    <title>权限 - 阮一峰的网络日志</title>
    <link rel="stylesheet" href="/css/custom.css" />
    
    <script src="/js/click_enlarge_image.js"></script>
    





<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123-45', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</head>


<body id="scrapbook" class="mt-entry-archive one-column">

    <div id="container">
        <div id="container-inner">
<div id="header">
    <div id="header-inner">
        <div id="header-content">
            
            <div id="header-name">
                阮一峰的网络日志
                
                <span>» <a href="/blog/" title="首页">首页</a></span>
                
                <span>» <a href="/blog/archives/" title="档案">档案</a></span>
                
            </div>
            
            <div id="google_search" style="background-image:url('/images/searchtop.gif');">
                
                <form action="https://www.baidu.com/s" target="_blank" method="get" id="cse-search-box">
                    <div>
                        <input type="text" size="20" name="origin" class="searchbox" id="sbi" value="">
                        <input type="hidden" name="wd" value="">
                        
                        <input type="image" src="/images/top_search_submit.gif" class="searchbox_submit" value=""
                            alt="搜索" name="sa" onclick="this.form.wd.value = this.form.origin.value + ' 阮一峰'">
                    </div>
                </form>

                
            </div>
            <div id="feed_icon">
                
            </div>

        </div>
    </div>

</div>



<div id="content">
    <div id="content-inner">
        <div id="alpha">
            <div id="alpha-inner">

                <div id="entry-1983" class="entry-asset asset hentry">

                    <div class="asset-header">
                        <div class="asset-nav entry-nav">

                            <div class="entry-location">
                                <ul>
                                    
                                    <li>上一篇：<a href="https://wellfrog27.github.io/blog/weekly/weekly-14/"
                                            title="科技爱好者周刊：第14期">科技爱好者周刊：第14期</a>
                                    </li>
                                    

                                    
                                    <li>下一篇：<a href="https://wellfrog27.github.io/blog/vim/move/"
                                            title="移动">移动</a>
                                    </li>
                                    

                                </ul>
                            </div>



                            <div class="entry-categories">
                                <p>分类<span class="delimiter">：</span></p>
                                <ul>
                                    <li><a href="https://wellfrog27.github.io/blog/linux/"
                                            rel="tag">Linux</a></li>
                                </ul>
                            </div>




                            <div class="entry-location-mobile" style="float: right;">
                                <ul>
                                    
                                    <li><a href="https://wellfrog27.github.io/blog/weekly/weekly-14/" title="科技爱好者周刊：第14期">⇐</a></li>
                                    
                                    
                                    <li><a href="https://wellfrog27.github.io/blog/vim/move/" title="移动">⇒</a></li>
                                    
                                </ul>
                            </div>

                        </div>
                    </div>

                    <article class="hentry">
                        <h1 id="page-title" class="asset-name entry-title">权限</h1>
                        
                        
                        
                        <div id="share_button" class="social-share"
                            style="float:right;padding-right:2em;padding-top:1em;">
                            <a class="bshareDiv" href="http://www.bshare.cn/share" style="display: block; text-decoration: none; padding: 0px;
                margin: 0px; font-size: 12px; height: 21px; width: 51px;">
                                <div class="bsPromo bsPromo1"></div>
                                <div class="buzzButton bsStyle10" style="height:21px;color:#333;;background:transparent
                  url(http://static.bshare.cn/frame/images/button_custom10-zh-Orange.gif)
                  no-repeat;text-align:center;width:51px;">
                                </div>
                                <div style="clear:both;"></div>
                            </a>

                            <script type="text/javascript" charset="utf-8"
                                src="http://static.bshare.cn/b/buttonLite.js#uuid=&amp;style=10&amp;bgcolor=#fff&amp;bp=weixin,qqim,qzone,qqmb,sinaminiblog,fanfou,xueqiu,douban,facebook,twitter,gplus,instapaper&amp;ssc=false">
                            </script>

                            <script type="text/javascript" charset="utf-8">
                                bShare.addEntry({
                                    title: document.getElementById("page-title").innerHTML,
                                    url: window.location.href
                                });
                            </script>

                        </div>
                        

                        <div class="asset-meta">
                            <p class="vcard author">作者： <a class="fn url" href="/">
                                    
                                    阮一峰
                                    
                                </a></p>
                            <p>日期： <a href="https://wellfrog27.github.io/blog/linux/"><abbr class="published"
                                        title=2014-10-02&#32;00:00:00&#32;&#43;0000&#32;UTC>2014年10月2日</abbr></a>
                            </p>
                        </div>

                        <div class="asset-content entry-content" id="main-content">
                            

<h2 id="普通权限">普通权限</h2>

<p>文件有三种权限。</p>

<ul>
<li>r，读权限，用八进制的4或者二进制的100表示</li>
<li>w，写权限，用八进制的2或者二进制的010表示</li>
<li>x，执行权限，用八进制的1或者二进制的001表示</li>
</ul>

<p>文件权限的含义。</p>

<ul>
<li>r：文件可以打开，读取内容。</li>
<li>w：文件可以编辑和修改。是否可以改名和删除，由目录属性决定。</li>
<li>x：文件可以被当作程序执行，前提是“读权限”必须也打开。</li>
</ul>

<p>目录权限的含义。</p>

<ul>
<li>r：列出目录内容。</li>
<li>w：允许目录内新建、删除、改名文件</li>
<li>x：允许进入该目录（即<code>cd directory</code>），实质是获取目录内每个文件的详细信息</li>
</ul>

<p>如果没有目录上的执行权限，则无法访问该目录内的文件系统对象。如果没有目录上的读权限，则无法在目录列表中查看该目录内的文件系统对象，但只要您知道该对象在磁盘上的完整路径，就可以访问这些对象。</p>

<p>这三种权限可以有8种组合。</p>

<ul>
<li><code>---</code> 二进制的000，八进制的0</li>
<li><code>--x</code> 二进制的001，八进制的1</li>
<li><code>-w-</code> 二进制的010，八进制的2</li>
<li><code>-wx</code> 二进制的011，八进制的3</li>
<li><code>r--</code> 二进制的100，八进制的4</li>
<li><code>r-x</code> 二进制的101，八进制的5</li>
<li><code>rw-</code> 二进制的110，八进制的6</li>
<li><code>rwx</code> 二进制的111，八进制的7</li>
</ul>

<p>每个文件或者目录有三种使用对象。</p>

<ul>
<li>文件的所有者</li>
<li>文件所在的组</li>
<li>其他用户</li>
</ul>

<p>每种对象都有上面三种权限，因此通常用<code>rwxrwxrwx</code>这种形式，表示这三种使用对象的权限，写成八进制就是<code>777</code>。</p>

<h2 id="特殊权限">特殊权限</h2>

<p><code>/etc/passwd</code>文件，它无法由普通用户直接更改，因为只有 root 用户能启用写权限。但是，在需要更改其密码时，普通用户需要能够以某种方式修改 /etc/passwd。所以，如果用户无法修改此文件，如何实现此目的？</p>

<p>Linux 权限模型有两种特殊的访问模式，称为 suid（设置用户 id）和 sgid（设置组 id）。一个可执行程序设置了 suid 访问模式时，它运行起来就像是由文件的所有者启动的一样，而不是由真正启动它的用户启动的。</p>

<p>类似地，在设置 sgid 访问模式后，该程序运行起来就像启动的用户属于该文件的组，而不是他自己的组。可单独或同时设置两种访问模式。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ls -l /usr/bin/passwd
-rwsr-xr-x <span style="color:#b452cd">1</span> root root <span style="color:#b452cd">30768</span> Feb <span style="color:#b452cd">22</span>  <span style="color:#b452cd">2012</span> /usr/bin/passwd</code></pre></td></tr></table>
</div>
</div>
<p>上面代码中，<code>passwd</code>可执行程序由<code>root</code>所有。但是，用户的权限三元组中的 x 被 s 替代。这表明对于这个特定的程序，设置了 suid 和可执行位。所以当 passwd 运行时，它执行起来就像具有完整的超级用户访问权的 root 用户启动了它，而不是运行它的用户启动 它。因为 passwd 使用 root 访问权运行，所以它可以修改 /etc/passwd。</p>

<p>suid 和 sgid 位占用了用户和组的 x 位。如果该文件是可执行的，suid 或 sgid 位（如果已设置）将显示为小写的 s。否则，它们显示为大写的 S。</p>

<p>尽管 suid 和 sgid 使用起来很方便，甚至在许多情况下必不可少，但是，如果不在当地使用这些访问模式，可能破坏系统的安全性。您拥有尽可能少的 suid 程序。passwd 命令是为数不多的必须 为 suid 的程序之一。</p>

<p>suid 和 sgid 位使用字母 s 以符号方式设置和重新设置。例如，u+s 设置 suid 访问模式，g-s 删除 sgid 模式。在八进制格式中，suid 在第一个（高阶）数中具有值 4，而 sgid 具有值 2。</p>

<p>当一个目录启用了 sgid 模式时，其中创建的任何文件或目录都将继承该目录的组 ID。这对一组参与同一个项目的人使用的目录树特别有用。</p>

<p>Linux系统提供几个特殊权限。</p>

<p>setuid 位（八进制4000)。当应用到一个可执行文件时，它把有效用户 ID 从真正的用户（实际运行程序的用户）设置成程序所有者的 ID。这种操作通常会应用到 一些由超级用户所拥有的程序。当一个普通用户运行一个程序，这个程序由根用户(root) 所有，并且设置了 setuid 位，这个程序运行时具有超级用户的特权，这样程序就可以 访问普通用户禁止访问的文件和目录。很明显，因为这会引起安全方面的问题，所有可以 设置 setuid 位的程序个数，必须控制在绝对小的范围内。</p>

<p>setgid 位（八进制2000），这个相似于 setuid 位，把有效用户组 ID 从真正的用户组 ID 更改为文件所有者的组 ID。如果设置了一个目录的 setgid 位，则目录中新创建的文件具有这个目录用户组的所有权，而不是文件创建者所属用户组的所有权。</p>

<p>对于共享目录来说，用户A创建一个文件或目录，该文件的所有者和用户组，就是用户A，其他用户可能会无法编辑。这时，设置<code>setgid</code>位就很有用处，用户B处理这个文件时，系统自动把用户B放入该文件的用户组之中。</p>

<p>拥有一个目录的写权限的用户可以删除该目录的文件。这对组项目而言是可以接受的，但它对全局共享的文件空间（比如 /tmp 目录）而言不太合适。</p>

<p>sticky 位（八进制1000）在符号上由 t 表示，在数值上由高阶八进制数中的 1 表示。这个继承于 Unix，在 Unix 中，它可能把一个可执行文件 标志为“不可交换的”。在 Linux 中，会忽略文件的 sticky 位，但是如果一个目录设置了 sticky 位， 那么它能阻止用户删除或重命名文件，除非用户是这个目录的所有者，或者是文件所有者，或是 超级用户。这个经常用来控制访问共享目录，比方说/tmp。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#228b22"># 设置程序的setuid权限</span>
$ chmod u+s program

<span style="color:#228b22"># 设置目录的setgid权限</span>
$ chmod g+s dir

<span style="color:#228b22"># 设置目录的sticky权限</span>
$ chmod +t dir</code></pre></td></tr></table>
</div>
</div>
<p>设置<code>setuid</code>属性的文件，权限显示为<code>-rwsr-xr-x</code>；设置<code>setgid</code>属性的目录，权限显示为<code>drwxrwsr-x</code>；设置<code>sticky</code>属性的目录，权限显示为<code>drwxrwxrwt</code>。</p>

<h2 id="表示方法">表示方法</h2>

<p><code>ls -l</code>会在输出结果的每一列的头部，显示一个权限字符串，一共有10个字符。</p>

<p>第一个字符描述对象类型。</p>

<ul>
<li>- 普通文件</li>
<li>d 目录</li>
<li>l 符号链接</li>
<li>c 字符特殊设备</li>
<li>b 块特殊设备</li>
<li>p FIFO</li>
<li>s 套接字</li>
</ul>

<p>接下来的 9 个字符表示 3 个组，每组 3 个字符。第一组表示文件所有者的读、写和执行权限。第二组表示文件的组的读、写和执行权限。第三组表示其他人的权限。</p>

<h2 id="lsattr">lsattr</h2>

<p>为了防止root 用户因疏忽而删除文件的情况，各种文件系统上还有其他一些属性 提供了额外的功能。其中一个是 immutable 属性。如果设置了该属性，在取消设置它之前，即使 root 用户也无法删除文件。</p>

<p>可以使用 lsattr 命令查看是否为一个文件或目录设置了不可变标志（或其他任何属性）。要让文件不可变，可以使用 chattr 命令和 -i 标志。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ touch keep.me
$ chattr +i keep.me
$ lsattr keep.me
----i---------- keep.me
$ rm -f keep.me
rm: cannot remove <span style="color:#cd5555">`</span>keep.me<span style="color:#a61717;background-color:#e3d2d2">&#39;</span>: Operation not permitted
$ chattr -i keep.me
$ rm -f keep.me</code></pre></td></tr></table>
</div>
</div>
<p>更改不可变标志需要 root 权限。</p>

<h2 id="掩码">掩码</h2>

<p>创建新文件时，创建进程会指定新文件应拥有的权限。通常，请求的模式为 0666，它使该文件可由任何人读和写。目录的模式默认情况下通常为 0777。但是，这种宽容性创建会受到一个 umask 值的影响，该值指定用户不想向新创建的文件或目录自动授予哪些权限。系统使用 umask 值来减少最初请求的权限。您可以使用 umask 命令查看 umask 设置。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#658b00">umask</span>
<span style="color:#b452cd">0002</span></code></pre></td></tr></table>
</div>
</div>
<p>umask 指定哪些权限不应授予。在 Linux 系统上，umask 默认情况下通常为 0022，这会从新文件中删除组和其他写权限。在用户拥有私有组时（就像这些示例中使用的 CentOS 系统上一样），umask 默认情况下通常为 0002，这会删除其他用户的写权限。</p>

<p>如果您想让您的文件更加私有，并禁止所有组或其他用户访问新创建的文件，可以使用 umask 值 0077。或者使用 umask u=rwx,g=,o= 以符号方式设置它。</p>

<p>使用 -S 选项，显示哪些权限被允许的形式符号性地显示 umask。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ <span style="color:#658b00">umask</span> -S
<span style="color:#00688b">u</span>=rwx,g=rwx,o=rx
$ <span style="color:#658b00">umask</span> <span style="color:#00688b">u</span>=rwx,g=,o=
$ <span style="color:#658b00">umask</span>
<span style="color:#b452cd">0077</span>
$ touch newfile
$ ls -l newfile
-rw-------. <span style="color:#b452cd">1</span> ian ian <span style="color:#b452cd">0</span> Aug  <span style="color:#b452cd">9</span> <span style="color:#b452cd">07</span>:09 newfile</code></pre></td></tr></table>
</div>
</div>
<p>上面命令中，最后创新的文件，所有者没有执行权限。请记住，新创建的文件的默认权限为 0666，而且 umask 值指定其中哪些位应删除（屏蔽掉）。所以如果您想要执行权限，必须将它显式添加到文件中。</p>

<h2 id="chgrp">chgrp</h2>

<p>要创建一个文件的组，可以使用 chgrp 命令和一个组名及一个或多个文件名。如果愿意的话，还可以使用组成员。普通用户必须拥有该文件，而且还是该文件组更改的目标组的成员。root 用户可以将文件更改到任何组。</p>

<p>chgrp 提供了一个 -R 选项，允许以递归方式向所有选择的文件和子目录应用更改。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ touch file{<span style="color:#b452cd">1</span>,2}
$ ls -l file*
-rw-rw-r--. <span style="color:#b452cd">1</span> ian ian <span style="color:#b452cd">0</span> Aug  <span style="color:#b452cd">9</span> <span style="color:#b452cd">07</span>:16 file1
-rw-rw-r--. <span style="color:#b452cd">1</span> ian ian <span style="color:#b452cd">0</span> Aug  <span style="color:#b452cd">9</span> <span style="color:#b452cd">07</span>:16 file2
$ chgrp development file1
$ chgrp <span style="color:#b452cd">1002</span> file2
$ ls -l file*
-rw-rw-r--. <span style="color:#b452cd">1</span> ian development <span style="color:#b452cd">0</span> Aug  <span style="color:#b452cd">9</span> <span style="color:#b452cd">07</span>:16 file1
-rw-rw-r--. <span style="color:#b452cd">1</span> ian development <span style="color:#b452cd">0</span> Aug  <span style="color:#b452cd">9</span> <span style="color:#b452cd">07</span>:16 file2</code></pre></td></tr></table>
</div>
</div>
<h2 id="chown">chown</h2>

<p>root 用户可以使用<code>chown</code>命令更改文件的所有权。在最简单的形式中，它的语法类似于 chgrp 命令，但使用了用户名或数值 ID 来代替组名称或 ID。此外，您还可以更改该文件的组，只需在用户名或 ID 后添加一个冒号和一个组名称或 ID。如果只提供了一个冒号，那么将使用用户的默认组。自然地，<code>-R</code>选项将递归地应用更改。</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ touch file4
$ su -
Password:
$ ls -l ~ian/file4
-rw-rw-r--. <span style="color:#b452cd">1</span> ian ian <span style="color:#b452cd">0</span> Aug  <span style="color:#b452cd">9</span> <span style="color:#b452cd">07</span>:27 /home/ian/file4
$ chown greg ~ian/file4
$ ls -l ~ian/file4
-rw-rw-r--. <span style="color:#b452cd">1</span> greg ian <span style="color:#b452cd">0</span> Aug  <span style="color:#b452cd">9</span> <span style="color:#b452cd">07</span>:27 /home/ian/file4
$ chown jenni:mary ~ian/file4
$ ls -l ~ian/file4
-rw-rw-r--. <span style="color:#b452cd">1</span> jenni mary <span style="color:#b452cd">0</span> Aug  <span style="color:#b452cd">9</span> <span style="color:#b452cd">07</span>:27 /home/ian/file4
$ chown :jenni ~ian/file4
$ ls -l ~ian/file4
-rw-rw-r--. <span style="color:#b452cd">1</span> jenni jenni <span style="color:#b452cd">0</span> Aug  <span style="color:#b452cd">9</span> <span style="color:#b452cd">07</span>:27 /home/ian/file4</code></pre></td></tr></table>
</div>
</div>
<h2 id="newgrp">newgrp</h2>

<p>newgrp 命令临时将您的主要组更改为您所属的另一个组。这将创建一个新的 shell，而且在退出该 shell 时，以前的组将恢复原状，</p>
<div class="highlight"><div style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ groups
ian development editor
$ newgrp development
$ groups
development ian editor
$ touch file3
$ ls -l file3
-rw-r--r--. <span style="color:#b452cd">1</span> ian development <span style="color:#b452cd">0</span> Aug  <span style="color:#b452cd">9</span> <span style="color:#b452cd">07</span>:21 file3
$ <span style="color:#658b00">exit</span>
<span style="color:#658b00">exit</span>
$ groups
ian development editor</code></pre></td></tr></table>
</div>
</div>
                        </div>

                        <div class="asset-footer">
                            <h3>文档信息</h3>
                            <ul>
                                <li>版权声明：自由转载-非商用-非衍生-保持署名（<a
                                        href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
                                </li>
                                <li>发表日期： <abbr class="published"
                                        title=".Date">2014年10月2日</abbr></li>
                            </ul>
                        </div>

                    </article>

                </div>

                
                
                <div id="related_entries">

                    <h2>相关文章</h2>
                    <ul>
                        
                        <li><strong>2019.07.15: <a href="https://wellfrog27.github.io/blog/linux/shells/fish-shell/"
                                    title="Fish Shell的用法">Fish Shell的用法</a></strong>

                            <div class="entry-body">
                                暂无描述，请点击阅读全文
                            </div>

                        </li>
                        
                        <li><strong>2019.06.26: <a href="https://wellfrog27.github.io/blog/linux/ssh/port-forwarding/"
                                    title="SSH 端口转发">SSH 端口转发</a></strong>

                            <div class="entry-body">
                                暂无描述，请点击阅读全文
                            </div>

                        </li>
                        
                        <li><strong>2019.03.30: <a href="https://wellfrog27.github.io/blog/linux/basic/"
                                    title="Linux的用法">Linux的用法</a></strong>

                            <div class="entry-body">
                                暂无描述，请点击阅读全文
                            </div>

                        </li>
                        
                        <li><strong>2019.03.09: <a href="https://wellfrog27.github.io/blog/linux/apache/config/"
                                    title="配置文件">配置文件</a></strong>

                            <div class="entry-body">
                                暂无描述，请点击阅读全文
                            </div>

                        </li>
                        
                    </ul>
                </div>
                

            </div>
        </div>
    </div>
</div>



<div id="click-img-container">
    <img src="" alt="Big Image">
</div>




<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "lin-hao-rong-de-wang-luo-ri-zhi" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



<div id="footer">
  <div id="footer-inner">
    <div id="footer-content">
      <p>2019 &copy; <a title="电子邮件" href="mailto:yifeng.ruan@gmail.com" target="_blank">联系方式</a>
        
    </div>
  </div>
</div>
</div>
    </div>

    
    
</body>

</html>